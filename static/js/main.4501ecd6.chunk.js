(this["webpackJsonpbrain-dumpster"]=this["webpackJsonpbrain-dumpster"]||[]).push([[0],{88:function(e,t,a){e.exports=a(99)},93:function(e,t,a){},99:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),o=a.n(c),i=a(56),l=(a(93),a(15)),s=a(132),u=a(149),m=a(150),d=a(42),h=a(148),f=a(140),p=a(78),g=a.n(p),v=a(79),E=a.n(v),b=a(80),x=a.n(b),w=a(68),O=a.n(w),j=a(74),y=a.n(j),C=a(73),S=a.n(C),N=a(137),I=a(138),k=a(139),D=a(141),T=a(69),B=a.n(T).a.createInstance({name:"brain-dumpster"}),M=a(51),W=a(52),R=["January","February","March","April","May","June","July","August","September","October","November","December"],A=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function J(){var e=(new Date).toLocaleString("en-US",{timeZone:"Asia/Jakarta"});return new Date(e)}function P(e,t){return e.toDateString()===t.toDateString()}function F(e){if(!e)return"";var t=A[e.getDay()],a=e.getDate(),n=R[e.getMonth()],r=e.getFullYear();return"".concat(t,", ").concat(a," ").concat(n," ").concat(r)}function G(e,t){var a=function(e,t,a){var n=Math.abs(t-e)/1e3,r={},c={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1},o={};return a?a.forEach((function(e){o[e]=c[e]})):o=Object(W.a)({},c),Object.keys(o).forEach((function(e){r[e]=Math.floor(n/o[e]),n-=r[e]*o[e]})),r}(e,t,["hour","minute","second"]),n=function(e){return e>1?"s":""},r=a.hour,c=a.minute,o=a.second,i=["".concat(r," hour").concat(n(r)),"".concat(c," minute").concat(n(c)),"".concat(o," second").concat(n(o))];return a.hour||(i.shift(),a.minute||i.shift()),i.join(" ")}var L=a(154),z=Object(s.a)((function(){return{textArea:{marginTop:"16px"}}})),Y=function(e){var t=e.text,a=e.setText,n=e.loading,c=z();return r.a.createElement(L.a,{className:c.textArea,multiline:!0,variant:"outlined",rows:"20",fullWidth:!0,value:t,onChange:function(e){var t=e.target.value;a(t)},disabled:n})},H=Object(s.a)((function(e){return{root:{height:"calc(100vh - 64px)","@media (max-width: 600px)":{height:"calc(100vh - 56px)"},display:"flex",flexDirection:"column"},container:{height:"calc(100vh - (64px + 3.5rem))","@media (max-width: 600px)":{height:"calc(100vh - (56px + 3.5rem))"},padding:"2rem 1rem 3rem",overflowY:"auto"},footer:{width:"100%",padding:"12px 12px",backgroundColor:"lightblue",boxSizing:"border-box",height:"3.5rem",display:"flex",alignItems:"center"},progressWrapper:{width:"100%",display:"flex",alignItems:"center"},loading:{display:"relative",top:-2},progress:{height:"20px",marginRight:"12px",flex:6},count:{flex:1,display:"flex",alignItems:"center"},progressIcon:{marginLeft:"8px"},infoRoot:{maxWidth:"615px",marginBottom:"16px",backgroundColor:e.palette.info.main},refreshIcon:{color:"white"}}})),K=function(){var e=H(),t=Object(n.useState)(!1),a=Object(l.a)(t,2),c=a[0],o=a[1],i=O()((function(e){var t=e.id,a=e.content,n=e.date,r=e.wordCount,c=e.finishedDate;if(t){var o=c;!o&&r>=750&&(o=J()),B.setItem("trash/".concat(t),{content:a,date:n,wordCount:r,finishedDate:o})}}),500),s=Object(n.useState)(),u=Object(l.a)(s,2),m=u[0],h=u[1],p=Object(n.useState)(),g=Object(l.a)(p,2),v=g[0],E=g[1],b=Object(n.useState)(),x=Object(l.a)(b,2),w=x[0],j=x[1];Object(n.useEffect)((function(){o(!0),B.iterate((function(e,t){return console.log("".concat(t,": ").concat(JSON.stringify(e)))}));var e=J();B.getItem("inProgress").then((function(t){var a,n;!t||t&&!P(t.date,e)?a=function(){var e=J(),t=e.toDateString()+100*Math.random();return B.setItem("inProgress",{id:t,date:e}),B.setItem("trash/".concat(t),{content:"",date:e,wordCount:0}),B.getItem("dumpster").then((function(e){var a=e||[];-1===a.indexOf(t)&&B.setItem("dumpster",[].concat(Object(M.a)(a),[t]))})),{id:t,date:e}}():(a={id:t.id,date:t.date},n=t.id,B.getItem("trash/".concat(n)).then((function(e){z(e.content),$(e.wordCount),h(e.finishedDate)}))),E(a.id),j(a.date),o(!1)}))}),[]);var C=Object(n.useState)(!1),T=Object(l.a)(C,2),W=T[0],R=T[1];Object(n.useEffect)((function(){var e=setInterval((function(){w&&!P(w,J())&&R(!0)}),3e4);return function(){clearInterval(e)}}),[w]);var A=Object(n.useState)(""),G=Object(l.a)(A,2),L=G[0],z=G[1],K=Object(n.useState)(0),U=Object(l.a)(K,2),Z=U[0],$=U[1];Object(n.useEffect)((function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.trim();return t?e.trim().split(/\s+/).length:0}(L);$(e),i({id:v,content:L,date:w,finishedDate:m,wordCount:e})}),[L,i,v,w,m]);var q=Object(n.useState)(0),Q=Object(l.a)(q,2),V=Q[0],X=Q[1];return Object(n.useEffect)((function(){var e=Math.floor(Z/750*100);X(e<100?e:100)}),[Z]),r.a.createElement("div",{className:e.root},r.a.createElement(N.a,{className:e.container},r.a.createElement(I.a,{in:W},r.a.createElement(k.a,{classes:{root:e.infoRoot},message:"This writing is from the past. Refresh this page to save it and start a new writing for today.",action:r.a.createElement(f.a,{edge:"start","aria-label":"Refresh Page",title:"Refresh Page",onClick:function(){return window.location.reload(),!1},classes:{colorPrimary:e.refreshIcon},color:"primary"},r.a.createElement(S.a,null))})),r.a.createElement(d.a,{variant:"h5"},F(w)),r.a.createElement(Y,{text:L,setText:z,loading:c}),c&&r.a.createElement(D.a,{variant:"indeterminate",className:e.loading})),r.a.createElement("div",{className:e.footer},r.a.createElement("div",{className:e.progressWrapper},r.a.createElement(D.a,{className:e.progress,variant:"determinate",value:V}),r.a.createElement("div",{className:e.count},r.a.createElement("div",null,Z," words"),100===V&&r.a.createElement(y.a,{color:"primary",className:e.progressIcon})))))},U=a(27),Z=a(155),$=a(136),q=a(151),Q=a(152),V=a(153),X=a(145),_=a(146),ee=a(147),te=a(142),ae=a(143),ne=a(144),re=a(76),ce=a.n(re),oe=a(75),ie=a.n(oe),le=Object(s.a)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500],"@media (max-width: 600px)":{display:"none"}},dialogTitle:{borderBottom:"2px solid lightgrey",display:"flex",alignItems:"center","& > button":{marginRight:"4px"}},dialogContent:{whiteSpace:"pre-wrap"}}})),se=function(e){var t=e.selectedTrash,a=e.setSelectedTrash,n=le();return r.a.createElement(te.a,{open:Boolean(t),fullScreen:!0,onClose:function(){return a(null)}},r.a.createElement(ae.a,{disableTypography:!0},r.a.createElement(d.a,{variant:"h6",className:n.dialogTitle,component:"div"},r.a.createElement(f.a,{"aria-label":"close",onClick:function(){return a(null)}},r.a.createElement(ie.a,null)),r.a.createElement("div",null,t&&F(t.date))),r.a.createElement(f.a,{"aria-label":"close",className:n.closeButton,onClick:function(){return a(null)}},r.a.createElement(ce.a,null))),r.a.createElement(ne.a,null,r.a.createElement(N.a,null,r.a.createElement("div",{className:n.dialogContent},t?t.content:""))))},ue=Object(s.a)((function(e){return{root:{height:"calc(100vh - 64px)","@media (max-width: 600px)":{height:"calc(100vh - 56px)"},overflow:"hidden"},title:{borderBottom:"2px solid lightgrey",marginTop:"18px",paddingBottom:"6px",width:"100%"},cardsContainer:{display:"flex",flexWrap:"wrap",marginTop:"6px"},card:{flex:"0 1 30%",margin:"16px 8px",minWidth:"272px",display:"flex",flexDirection:"column",justifyContent:"space-between"},pagination:{display:"flex",alignItems:"center",marginTop:"8px"}}})),me=function(){var e=ue(),t=Object(n.useState)([]),a=Object(l.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)([]),s=Object(l.a)(i,2),u=s[0],m=s[1];Object(n.useEffect)((function(){B.getItem("dumpster").then((function(e){o(Object(M.a)(e))}))}),[]);var f=Math.ceil(c.length/10),p=Object(n.useState)(1),g=Object(l.a)(p,2),v=g[0],E=g[1],b=Object(n.useCallback)((function(){var e=10*(v-1),t=10*v,a=c.slice(e,t).map((function(e){return B.getItem("trash/".concat(e))}));Promise.all(a).then((function(e){m(e)}))}),[c,v]);Object(n.useEffect)((function(){b()}),[b,v]);var x=Object(n.useState)(null),w=Object(l.a)(x,2),O=w[0],j=w[1];return r.a.createElement("div",{className:e.root},r.a.createElement(se,{selectedTrash:O,setSelectedTrash:j}),r.a.createElement(N.a,null,r.a.createElement(d.a,{variant:"h4",className:e.title},"Archive"),r.a.createElement("div",{className:e.cardsContainer},u.map((function(t){var a=t&&F(t.date);return r.a.createElement(X.a,{classes:{root:e.card},key:a},r.a.createElement(_.a,null,r.a.createElement(d.a,{variant:"h5"},a),r.a.createElement(d.a,null,t&&t.content.length>21?t.content.slice(0,21)+"...":t.content),r.a.createElement(d.a,null,"Words Count: ",t.wordCount," words"),t.wordCount>=750&&r.a.createElement(d.a,null,"Time Completion: ",G(t.date,t.finishedDate))),r.a.createElement(ee.a,null,r.a.createElement(h.a,{size:"small",onClick:function(){return j(Object(W.a)({},t))}},"Open")))}))),r.a.createElement("div",{className:e.pagination},r.a.createElement(h.a,{disabled:1===v,onClick:function(){return E(v-1)}},"< Prev"),r.a.createElement("div",null,v," of ",f),r.a.createElement(h.a,{disabled:v===f,onClick:function(){return E(v+1)}},"Next >"))))},de=Object(s.a)((function(e){return{root:{flexGrow:1,position:"relative",minHeight:"100vh"},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},list:{width:250,marginTop:16}}}));function he(e){var t=de(),a=Object(U.f)(),c=Object(n.useState)(!1),o=Object(l.a)(c,2),i=o[0],s=o[1];return r.a.createElement("div",{className:t.root},r.a.createElement(u.a,{position:"static"},r.a.createElement(m.a,null,r.a.createElement(f.a,{edge:"start",color:"inherit","aria-label":"menu",className:t.menuButton,onClick:function(){return s(!0)}},r.a.createElement(g.a,null)),r.a.createElement(d.a,{variant:"h6",className:t.title},"Brain Dumpster"),r.a.createElement(h.a,{color:"inherit"},"Login"))),r.a.createElement(Z.a,{anchor:"left",open:i,onClose:function(){return s(!1)}},r.a.createElement("div",{className:t.list,role:"presentation",onClick:function(){return s(!1)},onKeyDown:function(){return s(!1)}},r.a.createElement($.a,null,r.a.createElement(q.a,{button:!0,selected:"/"===window.location.pathname,onClick:function(){return a.push("/")}},r.a.createElement(Q.a,null,r.a.createElement(E.a,null)),r.a.createElement(V.a,{primary:"Brain Dump"})),r.a.createElement(q.a,{button:!0,selected:"/archive"===window.location.pathname,onClick:function(){return a.push("/archive")}},r.a.createElement(Q.a,null,r.a.createElement(x.a,null)),r.a.createElement(V.a,{primary:"Garbage Archive"}))))),r.a.createElement(U.c,null,r.a.createElement(U.a,{exact:!0,path:"/"},r.a.createElement(K,null)),r.a.createElement(U.a,{exact:!0,path:"/archive"},r.a.createElement(me,null))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,null,r.a.createElement(he,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[88,1,2]]]);
//# sourceMappingURL=main.4501ecd6.chunk.js.map